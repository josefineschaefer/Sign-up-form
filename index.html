<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
    <title>Sign up Page</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Karla:ital,wght@0,200..800;1,200..800&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap"
      rel="stylesheet"
    />
    <meta name="viewport" content="width=device-width" />
  </head>

  <body>
    <main>
      <div class="layout layout__left">
        <div class="layout__backdrop">
          <section class="layout__socials">
            <h1>Sign up with</h1>
            <a
              href="https://www.facebook.com"
              aria-label="Sign up with Facebook"
            >
              <img class="logo" src="assets/facebook_logo.svg" alt="facebook"
            /></a>
            <a href="https://www.twitter.com" aria-label="Sign up with Twitter">
              <img class="logo" src="assets/twitter_logo.svg" alt="twitter"
            /></a>
            <a
              href="https://www.instagram.com"
              aria-label="Sign up with Instagram"
            >
              <img
                class="logo"
                src="assets/instagram_logo.svg"
                alt="instagram"
              />
            </a>
            <p>or use your email for registration:</p>
          </section>
          <form class="layout__form" action="/action_page.php">
            <label for="name">Name:</label>
            <input type="text" placeholder="Name" id="name" />
            <label for="email">E-mail: <sup class="asterisk">*</sup></label>
            <input type="email" placeholder="E-mail" id="email" required />
            <label for="pass"
              >Password <sup class="asterisk">*</sup>
              <div class="tooltip-container">
                <img
                  class="help-icon"
                  src="assets/question.png"
                  alt="Help icon"
                />
                <span class="tooltip-help" role="tooltip" id="passwordrules">
                  Min. 8 characters,<br />
                  one uppercase.
                </span>
              </div>
            </label>
            <input
              type="password"
              id="pass"
              required
              placeholder="Password"
              aria-describedby="passwordrules"
              pattern="(?=.*[A-Z]).{8,}"
            />
            <div id="message">
              <h4>Password must contain the following:</h4>
              <p id="capital" class="invalid">A capital (uppercase) letter</p>
              <p id="length" class="invalid">Minimum 8 characters</p>
            </div>
            <div>
              <input required type="checkbox" id="TermsPrivacyCheckbox" checked /><label
                for="TermsPrivacyCheckbox"
                >I agree to the <a href="#myModal" id="Terms">Terms</a>
                and
                <a id="Privacy" id="Privacy" href="#myModal"
                  >Privacy Policy</a
                ><sup class="asterisk">*</sup></label
              >
            </div>
            <!-- The Modal -->
            <div
              id="myModal"
              class="modal"
              role="alertdialog"
              aria-modal="true"
              aria-labelledby="Terms and Conditions"
            >
              <!-- Modal content -->
              <div class="modal-content">
                <button class="close-button">&times;</button>
                <p class="loremIpsum">Loading...</p>
              </div>
            </div>
            <div class="submit">
              <button
                class="sign-up-button"
                type="submit"
                onclick="loginConfirmation()"
              >
                Sign Up
              </button>
            </div>
          </form>
        </div>
      </div>
      <div class="layout layout__right">
        <img
          src="assets/illustration.jpeg"
          alt="An artistic illustration showing diverse people in various activities"
          loading="lazy"
        />
      </div>
    </main>

    <script>
      function loginConfirmation() {
        console.log("You are successfully signed up, yay!");
      }

      // Get the modal
      const modal = document.getElementById("myModal");
      // Get the modal and modal content element
      const modalContent = document.querySelector(
        ".modal-content p.loremIpsum"
      );

      // Get the links
      const termsLink = document.getElementById("Terms");
      const privacyLink = document.getElementById("Privacy");

      // Function to load content into the modal
      async function loadContent(url) {
        try {
          const response = await fetch(url);
          const text = await response.text();
          modalContent.innerHTML = text;
          modal.style.display = "block"; // Show the modal
        } catch (error) {
          console.error("Failed to load content:", error);
          modalContent.textContent = "Error loading content. Please try again.";
          modal.style.display = "block";
        }
      }

      // Event listeners for the links
      termsLink.addEventListener("click", (e) => {
        e.preventDefault();
        loadContent("assets/terms.txt");
      });

      privacyLink.addEventListener("click", (e) => {
        e.preventDefault();
        loadContent("assets/privacy.txt");
      });

      // Get the <span> element that closes the modal
      const span = document.getElementsByClassName("close-button")[0];

      // When the user clicks on <span> (x), close the modal
      span.onclick = function () {
        modal.style.display = "none";
      };

      // When the user clicks anywhere outside of the modal, close it
      window.onclick = function (event) {
        if (event.target == modal) {
          modal.style.display = "none";
        }
      };

      const myInput = document.getElementById("pass");
      const letter = document.getElementById("letter");
      const capital = document.getElementById("capital");
      const length = document.getElementById("length");

      // When the user clicks on the password field, show the message box
      myInput.onfocus = function () {
        document.getElementById("message").style.display = "block";
      };

      // When the user clicks outside of the password field, hide the message box
      myInput.onblur = function () {
        document.getElementById("message").style.display = "none";
      };

      // When the user starts to type something inside the password field
      myInput.onkeyup = function () {
        // Validate capital letters
        const upperCaseLetters = /[A-Z]/g;
        if (myInput.value.match(upperCaseLetters)) {
          capital.classList.remove("invalid");
          capital.classList.add("valid");
        } else {
          capital.classList.remove("valid");
          capital.classList.add("invalid");
        }

        // Validate length
        if (myInput.value.length >= 8) {
          length.classList.remove("invalid");
          length.classList.add("valid");
        } else {
          length.classList.remove("valid");
          length.classList.add("invalid");
        }
      };
    </script>
  </body>
</html>
